{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)b7308d29-b7ed-45d5-a0a5-61058b371844","ParentGuid":"(Guid)770aa06a-7a9e-4b35-90e3-f003a57f03a3","Name":"(string)Calculate","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)f8a58466-d7f6-439f-bbb8-d4600e41d099","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"f8a58466","@Value":{"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)//IF BMS_IsConnected() then\n\tCalculateVoltageBasedCurrentLimits(minCellVoltage := gvBMS.gvMinMax.minimumCellVoltage_mV,\n\t\t\t\t\t\t\t\t\t   maxCellVoltage := gvBMS.gvMinMax.maximumCellVoltage_mV,\n\t\t\t\t\t\t\t\t\t   AllowedVoltageBasedCurrent := voltageBasedSof,\n\t\t\t\t\t\t\t\t\t   CalculatedCurveValues := gvSOF.curveRecommandedOperatingCurrent,\n\t\t\t\t\t\t\t\t\t   ConfigurationValues := gvSOF.SOF_Config);\n\t\t\t\t\t\t\t\t\t   \n\tCalculateTemperatureBasedCurrentLimit(minCellTemperature := gvBMS.gvMinMax.minimumTemperature_degC,\n\t\t\t\t\t\t\t\t\t\t  maxCellTemperature := gvBMS.gvMinMax.maximumTemperature_degC,\n\t\t\t\t\t\t\t\t\t\t  AllowedTemperatureBasedCurrent := temperatureBasedSof,\n\t\t\t\t\t\t\t\t\t\t  CalculatedCurveValues := gvSOF.curveRecommandedOperatingCurrent,\n\t\t\t\t\t\t\t\t\t\t  ConfigurationValues := gvSOF.SOF_Config);\t\n\n\tallowedCurrent.ContinuosChargeCurrent := MIN(voltageBasedSof.ContinuosChargeCurrent, temperatureBasedSof.ContinuosChargeCurrent);\n\tallowedCurrent.PeakChargeCurrent := MIN(voltageBasedSof.PeakChargeCurrent, temperatureBasedSof.PeakChargeCurrent);\n\tallowedCurrent.ContinuosDischargeCurrent := MIN(voltageBasedSof.ContinuosDischargeCurrent, temperatureBasedSof.ContinuosDischargeCurrent);\n\tallowedCurrent.PeakDischargeCurrent := MIN(voltageBasedSof.PeakDischargeCurrent, temperatureBasedSof.PeakDischargeCurrent);\n\t\n\tgvSOF.SOFValues.recommandedContinuosChargeCurrent := allowedCurrent.ContinuosChargeCurrent;\n\tgvSOF.SOFValues.recommandedContinuosDischargeCurrent := allowedCurrent.ContinuosDischargeCurrent;\n\tgvSOF.SOFValues.recommandedPeakChargeCurrent := allowedCurrent.PeakChargeCurrent;\n\tgvSOF.SOFValues.recommandedPeakDischargeCurrent := allowedCurrent.PeakDischargeCurrent;\n\t\n\tgvSOF.SOFValues.recommandedContinuosChargeCurrent := allowedCurrent.ContinuosChargeCurrent;\n\tgvSOF.SOFValues.recommandedContinuosDischargeCurrent := allowedCurrent.ContinuosDischargeCurrent;\n\tgvSOF.SOFValues.recommandedPeakChargeCurrent := allowedCurrent.PeakChargeCurrent;\n\tgvSOF.SOFValues.recommandedPeakDischargeCurrent := allowedCurrent.PeakDischargeCurrent;\n\t\n//else\n// \tgvSOF.SOFValues.recommandedContinuosChargeCurrent := 0;\n// \tgvSOF.SOFValues.recommandedContinuosDischargeCurrent := 0;\n// \tgvSOF.SOFValues.recommandedPeakChargeCurrent := 0;\n// \tgvSOF.SOFValues.recommandedPeakDischargeCurrent := 0;\t\n//end_if\n\n// IF (BMS_IsTransitionToErrorStateActive() = TRUE) THEN\n// \tsof_tableSofValues.recommendedContinuousPackChargeCurrent_mA    = 0.0f;\n// \tsof_tableSofValues.recommendedContinuousPackDischargeCurrent_mA = 0.0f;\n// \tsof_tableSofValues.recommendedPeakPackChargeCurrent_mA          = 0.0f;\n// \tsof_tableSofValues.recommendedPeakPackDischargeCurrent_mA       = 0.0f;\n// END_IF","LineInfoPersistence":"(string)b7308d29-b7ed-45d5-a0a5-61058b371844_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)METHOD Calculate\nVAR_INPUT\nEND_VAR\nVAR\n\tallowedCurrent : typSOF_CURRENT_LIMITS;\n\tvoltageBasedSof : typSOF_CURRENT_LIMITS;\n\ttemperatureBasedSof : typSOF_CURRENT_LIMITS;\n\tminCharge : REAL;\n\tminDischarge : REAL;\nEND_VAR","LineInfoPersistence":"(string)b7308d29-b7ed-45d5-a0a5-61058b371844_Decl_LineIds"}}}}}},"TypeInfos":{"3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","f8a58466":"{f8a58466-d7f6-439f-bbb8-d4600e41d099}","string":"System.String"}}},"FormatVersion":"1.0"}