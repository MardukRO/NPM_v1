{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)c3aa126e-3362-46f0-a79b-05476a98cb76","ParentGuid":"(Guid)c8e15edc-bc27-44d6-ba9a-959f73b84e9e","Name":"(string)ProcessState_Balancing","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)f8a58466-d7f6-439f-bbb8-d4600e41d099","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"f8a58466","@Value":{"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)IF (stateRequest = eBAL_STATE_REQUEST.BAL_STATE_NO_BALANCING_REQUEST) THEN\n\tbal_State.balancingAllowed := FALSE;\nEND_IF\n\nIF (stateRequest = eBAL_STATE_REQUEST.BAL_STATE_ALLOWBALANCING_REQUEST) THEN\n\tbal_State.balancingAllowed := TRUE;\nEND_IF\n\nIF (bal_State.balancingGlobalAllowed = FALSE) THEN\n\tIF (bal_State.active) THEN\n\t\tDeactivate();\n\tEND_IF\n\tbal_State.active := FALSE;\n\tbal_State.state := eBAL_STATE.BAL_STATEMACH_BALANCE;\n\tbal_State.substate := eBAL_SUB_STATE.BAL_ENTRY;\n\tRETURN;\nEND_IF\n\nIF (bal_State.substate = eBAL_SUB_STATE.BAL_ENTRY) THEN\n\tIF (bal_State.balancingGlobalAllowed = FALSE) THEN\n\t\tIF (bal_State.active) THEN\n\t\t\tDeactivate();\n\t\tEND_IF\n\t\tbal_State.active := FALSE;\n\t\tbal_State.state := eBAL_STATE.BAL_STATEMACH_BALANCE;\n\t\tbal_State.substate := eBAL_SUB_STATE.BAL_ENTRY;\n\tELSE\n\t\tbal_State.substate := eBAL_SUB_STATE.BAL_CHECK_LOWEST_VOLTAGE;\n\tEND_IF\nELSIF (bal_State.substate = eBAL_SUB_STATE.BAL_CHECK_LOWEST_VOLTAGE) THEN\n\tbal_State.substate := eBAL_SUB_STATE.BAL_CHECK_CURRENT;\n\tIF (minMax.minimumCellVoltage_mV <= BALANCING_CONFIG.BAL_LOWER_VOLTAGE_LIMIT_mV) OR \n\t    (minMax.maximumTemperature_degC >= BALANCING_CONFIG.BAL_UPPER_TEMPERATURE_LIMIT_degC) THEN\n\t\tIF (bal_State.active) THEN\n\t\t\tDeactivate();\n\t\tEND_IF\n\t\tbal_State.active := FALSE;\n\t\tbal_State := eBAL_STATE.BAL_STATEMACH_CHECK_BALANCING;\n\t\tbal_State.substate := eBAL_SUB_STATE.BAL_ENTRY;\n\tEND_IF\n\tRETURN;\nELSIF (bal_State.substate = eBAL_SUB_STATE.BAL_CHECK_CURRENT) THEN\n\tIF (gvBMS.Fb_String.GetStringState() = eBMS_CURRENT_FLOW_STATE.AT_REST) THEN\n\t\tbal_State.substate := eBAL_SUB_STATE.BAL_ACTIVATE_BALANCING;\n\tELSE\n\t\tIF (bal_State.active) THEN\n\t\t\tDeactivate();\n\t\tEND_IF\n\t\tbal_State.active := FALSE;\n\t\tbal_State := eBAL_STATE.BAL_STATEMACH_CHECK_BALANCING;\n\t\tbal_State.substate := eBAL_SUB_STATE.BAL_ENTRY;\t\n\tEND_IF\n\tRETURN;\nELSIF (bal_State.substate = eBAL_SUB_STATE.BAL_ACTIVATE_BALANCING) THEN\n\tIF (bal_State.balancingGlobalAllowed = FALSE) THEN\n\t\tIF (bal_State.active) THEN\n\t\t\tDeactivate();\n\t\tEND_IF\n\t\tbal_State.active := FALSE;\n\t\tbal_State.state := eBAL_STATE.BAL_STATEMACH_BALANCE;\n\t\tbal_State.substate := eBAL_SUB_STATE.BAL_ENTRY;\n\tELSE\n\t\tIF (Activate() = TRUE) THEN\n\t\t\tbal_State.balancingThreshold := balControl.threshold_mV + BALANCING_CONFIG.BAL_HYSTERESIS_mV;\n\t\t\tbal_State.state := eBAL_STATE.BAL_STATEMACH_CHECK_BALANCING;\n\t\t\tbal_State.substate := eBAL_SUB_STATE.BAL_ENTRY;\n\t\tELSE\n\t\t\tbal_State.state := eBAL_STATE.BAL_STATEMACH_BALANCE;\n\t\t\tbal_State.substate := eBAL_SUB_STATE.BAL_ENTRY;\n\t\tEND_IF\n\tEND_IF\n\tRETURN;\nEND_IF","LineInfoPersistence":"(string)c3aa126e-3362-46f0-a79b-05476a98cb76_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)METHOD ProcessState_Balancing\nVAR_INPUT\n\tstateRequest : eBAL_STATE_REQUEST;\nEND_VAR\n","LineInfoPersistence":"(string)c3aa126e-3362-46f0-a79b-05476a98cb76_Decl_LineIds"}}}}}},"TypeInfos":{"3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","f8a58466":"{f8a58466-d7f6-439f-bbb8-d4600e41d099}","string":"System.String"}}},"FormatVersion":"1.0"}